---
navhome: /docs/
next: true
title: 1.1
---

### 1.1 - Time to talk to your ship.

Let's start with a hard-coded way to say hi to your ship over HTTP.

Checkout to the `1.1` branch for this section:

```
$ git checkout 1.1
```

In your `:dojo`, your ship should have recognized changes to your two files:

```
: /~londyn-foshut-hanrun-mipful--sapsyp-timdet-holwel-davteb/home/3/web/urbit-web/tutorial/html
: /~londyn-foshut-hanrun-mipful--sapsyp-timdet-holwel-davteb/home/3/web/urbit-web/tutorial/tutorial/js
>
```

The `case`, or version number, of your `home` desk should be incremented as a result of the change.  (Ours is `3` above, but yours may be different.)

Reload the page (`http://localhost:8443/urbit-web/tutorial.html`), have your dev tools open  and your `:dojo` in sight.

Now, click the button!

* XX ![says hi](https://placeimg.com/640/480/arch/grayscale)

What happened?  Well, you were able to talk to your ship.

We did this using the simple HTTP API in our small [`urb.js`](https://github.com/urbit/arvo/blob/maint-20160818/web/lib/js/urb.js) library, which comes with your ship.

We pulled in `urb.js` in this version of the code, let's check it out:

```
###
# tutorial.html
###
[...]
  <head>
    [...]
    <script src="/~/at/=home=/web/lib/js/urb.js"></script>
    <script src="/=home=/web/urbit-web/tutorial/tutorial.js"></script>
  </head>
  <body>
    <div>
      <button id="hiButton" onclick='sayHi();'>Say hi to your ship!</button>
    </div>
    <br />
    <div id="response"></div>
    <br />
    <div id="shipHi"></div>
  </body>
</html>
```

By appending the `/~/at/` before the file path in that `<script>` tag, we told your ship to inject authentication and user JSON data to the top of your `urb.js` file under the `window.urb` object.

If you open `http://localhost:8443/~/at/=home=/web/lib/js/urb.js` you'll see something similar to this:

```
{
  "oryx": "bardys-ridmes-salser-napreg--watwer-ribmyn-midsul-digber",
  "user": "londyn-foshut-hanrun-mipful--sapsyp-timdet-holwel-davteb",
  "sein": "zod",
  "ixor": "morret-taspeg-ritlug-fortug",
  "ship": "londyn-foshut-hanrun-mipful--sapsyp-timdet-holwel-davteb",
  "auth": [
    "londyn-foshut-hanrun-mipful--sapsyp-timdet-holwel-davteb"
  ]
}
```

Let's step through it:

- An `oryx` is just a [CSRF token](https://en.wikipedia.org/wiki/Cross-site_request_forgery) for authentication.
- `ixor` is a hash of this CSRF token, also for authentication.
- `user`, `ship` and `auth` are all additionally there for authentication.  If you're not logged in, we treat your web browser as if it were another Urbit, and just assign it a random comet name.
- And lastly, `sein` is the parent of the current ship. While a planet's parent is a star, a comet's parent is a galaxy. On the current maintenance network, all comets including yours will have the galaxy parent `~zod`, or galaxy `0`.

`urb.js` uses this data to compose requests to your ship's web server, `%eyre`.

We put `urb.js` to work in our `tutorial.js` file.  Let's step through it:

```
###
# tutorial.js
###
function sayHi() {
  var data = 'hi. :)';

  document.getElementById('hiButton').disabled = true;

  return window.urb.send(
    data,                                               // data
    {                                                   // params
      appl: 'hood',
      mark: 'helm-hi',
      ship: window.urb.user
    },
    function sentMessage(error, response) {             // callback
      if (error || !response.data || response.fail) {
        console.warn('`urb.send` to ~' + window.urb.user + ' the data payload:');
        console.warn(data);
        console.warn('failed. Error:');
        console.warn(error);
        console.warn(response);
        return;
      }
      console.log('`urb.send` to ~' + window.urb.user + ' the data payload:');
      console.log(data);
      console.log('succeeded! Response:');
      console.log(response.data);
      document.getElementById('response').innerHTML = '<code>' + JSON.stringify(response.data) + '</code>';
      document.getElementById('shipHi').innerHTML = '<code>~' + window.urb.user + '</code> says hi back!';
      document.getElementById('hiButton').disabled = false;
    });
}

window.module = window.module || {};
module.exports = {
  sayHi: sayHi
};
```

For this simple example, when we click the button we call the `urb.send` function, which takes as arguments:

XX can we just put the function signature here?

1. A data value.
2. An object of parameters further specifying the message being sent.
3. A callback function to execute upon a successful or failed request.

If you open up the network tab of your dev tools you can see what it generates.  It should look something like this:

```
{
  "oryx": "modtuc-diffus-ropdef-novluc--satlev-tomrut-lodres-digweg",
  "ship": "londyn-foshut-hanrun-mipful--sapsyp-timdet-holwel-davteb",
  "appl": "hood",
  "mark": "helm-hi",
  "wire": "/"
  "xyro": "hi. :)",
}
```

- We're already familiar with what your `oryx` is: an authenticated CSRF token.
- The default `ship` value is the same one in the `window.urb` object described above.
- The `params` that we specified we then placed in an object that contained two name-value pairs:
  1. `appl`, for 'application', is `"hood"`, your ship's system daemon.
  2. `mark`, or message type (similar to a MIME type), is a `"helm-hi"`.
- The `wire` value specifies the path endpoint for the request. Urbit requests follow a [Command-Query Separation](https://en.wikipedia.org/wiki/Command%E2%80%93query_separation) (CQS) pattern, which we'll see more of later. But for this simple example, we don't need to specify a wire.  `urb.js` actually injected this for us.
- And your data value, renamed `xyro`, was just the string, `"hi. :)"`.

When the request is complete, your callback function simply `console.log`s the response. Your ship sent you an `{ok:true}`, which is just an acknowledgement.  

Great!  Contact has been made.  Let's keep going!
