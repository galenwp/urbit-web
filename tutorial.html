<head>
    <meta charset="UTF-8">
    <title>Urbit from the Web</title>

    <script src="/~~/~/at/=home=/web/lib/js/urb.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
    <script src="/~~/=home=/web/tutorial/tutorial.js"></script>
    <link href="/~~/=home=/web/tutorial/tutorial.css" rel="stylesheet" />

</head>

<body>

  <div id="loading">
    Loading...
  </div>

  <div>
      <h1 id="shipDisplay" class="ship-display"></h1>
      <br />
  </div>

  <div>
      <input type="text" id="fetchBox" size="80" placeholder="~zod">Fetch
      <br />
      <button onclick='fetch();'>Fetch</button>
      <br />
  </div>

  <br />

  <div>
      <button id="subscribeButton" class="hidden" onclick='subscribe();'>Subscribe</button>
      <br />
  </div>

  <br />

  <div>
      <button id="unsubscribeButton" class="hidden" onclick='unsubscribe();'>Unsubscribe</button>
      <br />
  </div>

  <br />

  <div>
      <input id="postBox" type="text" class="hidden" size="80" value="">Text
      <br />
      <button id="postButton" onclick='sendPost();'>Post</button>
      <br />
  </div>

  <br />

  <div id="posts">
  </div>

  <script>
    if (!(window.location.search)) {
      document.getElementById('shipDisplay').innerHTML = '~' + window.urb.user;
    } else {
      document.getElementById('shipDisplay').innerHTML = '~' + window.location.search.substring(7); // XX
    }

    document.getElementById('fetchBox').addEventListener('keyup', function fetchOnEnter(event) {
      if (!event) { event = window.event; }
      event.preventDefault();
      if (event.keyCode === 13) { fetch(); }
    }, false);
    document.getElementById('postBox').addEventListener('keyup', function postOnEnter(event) {
      if (!event) { event = window.event; }
      event.preventDefault();
      if (event.keyCode === 13) { sendPost(); }
    }, false);
    document.getElementById('loading').classList.remove('hidden');
  </script>


</body>

</html>
